#!/bin/bash

# –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ø–æ–∫–∞–∂–µ–º –≤–∏–¥–∂–µ—Ç —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏
# –í–ê–ú –ù–£–ñ–ù–û –ë–£–î–ï–¢ –ó–ê–ú–ï–ù–ò–¢–¨ API –ö–õ–Æ–ß!

echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –î–ª—è —Ä–∞–±–æ—Ç—ã –≤–∏–¥–∂–µ—Ç–∞ –Ω—É–∂–µ–Ω API –∫–ª—é—á!"
echo ""
echo "üîë –ü–û–õ–£–ß–ò–¢–ï API –ö–õ–Æ–ß –ó–î–ï–°–¨:"
echo "   1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://home.openweathermap.org/users/sign_up"
echo "   2. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á: https://home.openweathermap.org/api_keys"
echo ""
echo "üìù –ó–ê–ú–ï–ù–ò–¢–ï –í –§–ê–ô–õ–ï ~/.config/eww/scripts/weather_gomel:"
echo "   –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: API_KEY=\"demo_key_for_testing\""
echo "   –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞: API_KEY=\"–í–ê–®_–ö–õ–Æ–ß_32_–°–ò–ú–í–û–õ–ê\""
echo ""

# –°–æ–∑–¥–∞–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–∞–±–æ—Ç—ã –≤–∏–¥–∂–µ—Ç–∞
cache_dir="$HOME/.cache/eww/weather"
mkdir -p "$cache_dir"

echo "12¬∞C" > "${cache_dir}/temp"
echo "10¬∞C" > "${cache_dir}/feels_like" 
echo "–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å" > "${cache_dir}/description"
echo "‚òÅÔ∏è" > "${cache_dir}/icon"
echo "3 –º/—Å" > "${cache_dir}/wind_speed"
echo "–°" > "${cache_dir}/wind_dir"
echo "75%" > "${cache_dir}/humidity"
echo "1013 –≥–ü–∞" > "${cache_dir}/pressure"
echo "–ì–æ–º–µ–ª—å" > "${cache_dir}/city"
echo "BY" > "${cache_dir}/country"
echo "$(date '+%H:%M')" > "${cache_dir}/last_update"

echo "‚úÖ –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã. –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∏–¥–∂–µ—Ç..."
echo ""

# –ó–∞–ø—É—Å–∫–∞–µ–º EWW –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–∂–µ—Ç
eww daemon &
sleep 2
eww open weather

echo ""
echo "üå§Ô∏è  –í–ò–î–ñ–ï–¢ –ó–ê–ü–£–©–ï–ù –° –î–ï–ú–û-–î–ê–ù–ù–´–ú–ò"
echo ""
echo "üîÑ –î–õ–Ø –ù–ê–°–¢–û–Ø–©–ï–ô –ü–û–ì–û–î–´:"
echo "   1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á (—Å–º. –≤—ã—à–µ)"
echo "   2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ ~/.config/eww/scripts/weather_gomel"
echo "   3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: ~/.config/eww/scripts/weather_gomel update"
echo "   4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ: eww reload"